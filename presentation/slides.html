<!DOCTYPE html>
<html>
    <head>
        <title>Use functions for a greater good</title>
        <meta charset="utf-8">
        <style>
         @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
         @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
         @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

         body { font-family: 'Droid Serif'; }
         h1, h2, h3 {
             font-family: 'Yanone Kaffeesatz';
             font-weight: normal;
         }
         .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }

         blockquote {
             border-left: 0.3em solid rgba(0,0,0,0.5);
             padding: 0 15px;
             font-style: italic;
         }

        </style>
    </head>
    <body>
        <textarea id="source">
# Is OOP the Holly Grail?

# Some promises of OOP

Reuse - OOP makes programming faster and easier because of the reuse of existing, previously tested classes from a library.  Reuse can also be accomplished by inheritance.

--

# Code Reuse

> Reusability has been difficult to achieve on early object-oriented projects because class libraries are not inherently very reusable. Searching through a class library, and understanding the details of code used to build the classes, can often cost more than rebuilding the classes from scratch."
>
> <footer>
            - <cite>The Object Technology Architecture: Business Objects for Corporate Information Systems
            Business Object Design and Implementation: OOPSLA ’95 Workshop Proceedings</cite>
</footer>

---

# But still they were quite optimistic ...

> "By 1997, it will be possible to buy 50% of an application as off-the-shelf components, effectively doubling productivity. By 1998, early adopters will be buying 50% of the application as external components and reusing internally generated components for another 25% of the application, effectively doubling productivity on an annual basis"

The Object Technology Architecture: Business Objects for Corporate Information Systems
Business Object Design and Implementation: OOPSLA ’95 Workshop Proceedings

--

# But still OOP is on the rise
* object-oriented COBOL 2002 ISO standard
* ECMAScript 6 with classes

---

# JFYI

Fernandez, David, et al. "Has the Object-Oriented Paradigm Kept Its Promise?." (2002).
APA    
http://ddi.cs.uni-potsdam.de/HyFISCH/Informieren/Programmiersprachen/OOPromisesAndReality.pdf

---

# Functions

> “Sometimes, the elegant implementation is just a function. Not a method. Not a class. Not a framework. Just a function.” – John Carmack

---

# SRP (Single Responsibility Principle)

---

# Functional interfaces (SAM) 
```Java
    final Label label = new HospitalRecords();
    final Music music = label.produceWith(new Artist() {
        @Override
*       public String name() {
*           return "Lenzman";
*       }
    });
    music.play(); // Producing Drum and Bass with famous Lenzman.
```
--
```Java
    final Label label = new HospitalRecords(); 
*   final Music music = label.produceWith(() -> "Lenzman");
    music.play(); // Producing Drum and Bass with famous Lenzman.
```
---
# Functional interfaces (SAM) 
```Java
public interface Label {
*   Music produceWith(Artist artist);
}
class HospitalRecords implements Label {
    public Music produceWith(Artist artist) {
        return new DrumAndBass(artist);
    }
}
```
--
```Java
*   final Label label = artist -> new DrumAndBass(artist);
    final Music music = label.produceWith(() -> "Lenzman");
    music.play(); // Producing Drum and Bass with famous Lenzman.
```
--
```Java
*   final Label label = DrumAndBass::new;
    final Music music = label.produceWith(() -> "Lenzman");
    music.play(); // Producing Drum and Bass with famous Lenzman.
```
--
```Java
*   final Function<Artist, Music> label = DrumAndBass::new;
    final Music music = label.apply(() -> "Lenzman");
    music.play(); // Producing Drum and Bass with famous Lenzman.
```

---
# Composition over inheritance 
> "Favor 'object composition' over 'class inheritance'." (Gang of Four 1995:20)

> "Favor composition over inheritance." (Effective Java, Joshua Bloch 2001)

--

But how to properly compose classes?

---
# Function Composition in Math
```Haskell
    squared x = x*x
    negated x = -x
    squaredAndNegated = negated . squared
    squaredAndNegated 8 // -64 
    
```
--
```Haskell
    f :: A -> B
    g :: B -> C
*   z :: A -> C
```
--
```Haskell
    . :: (B -> C) -> (A -> B) -> (A -> C)
    . g f x = g(f(x))
```
---
# Function Composition in Java 8
```Java
    Function<A, C> compose(Function<B, C> g, Function<A, B> f) =
       (A a) -> g.apply(f.apply(a));
```
--
```Java
    final Function<Integer, Integer> squared = a -> a * a;
    final Function<Integer, Integer> negated = a -> -a;
*   final Function<Integer, Integer> squaredAndNegated =
*     negated.compose(squared);
    squaredAndNegated.apply(4); // -16
```
--
```Java
    final Function<Artist, Music> writeSomeRandomMusic = Music::new;
    final Function<Music, Track> recordTheMusic = Track::new;
*   final Function<Artist, Track> produceTrack =
*     recordTheMusic.compose(writeSomeRandomMusic);

```

---
# End-to-End example
```Java
    final Function<Artist, Music> writeSomeRandomMusic = Music::new;
    final Function<Music, Track> recordTheMusic = Track::new;
    final Function<List<Track>, Album> publishTheAlbum = Album::new;

    final Function<Artist, Track> produceTrack =
       recordTheMusic.compose(writeSomeRandomMusic);
*   final Function<Artist, List<Track>> produceTracks = ???
    final Function<Artist, Album> produceTheAlbum =
       publishTheAlbum.compose(produceTracks);

    Artist someArtist = new Artist("Some Artist");
    produceTheAlbum.apply(someArtist); // And we get the Album in the end
```

---
# High-Order functions

---
    # Composition with High-Order functions
    show examples not only with streams but also with other things like ComposibleFutures, Options, etc.

    ---

    # reduce

    ---

    # map

    ---

    # filter

    ---

    # Context

    ---

    # flatMap
    show examples with streams, ComposibleFutures, Observables, Options

    ---
        </textarea>
        <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
        </script>
        <script>
                var slideshow = remark.create({
                   highlightLines: true
                });
        </script>
    </body>
</html>
